# Render blueprint for deploying the project
# Instructions: Commit this file and then import via Render dashboard (New -> Blueprint -> Import YAML)

services:
  - type: web
    name: kosg-backend
    env: docker
    # The Dockerfile path is relative to the repo root
    dockerfilePath: backend/Dockerfile
    branch: main
    plan: starter
    buildCommand: ""
    startCommand: ""
    envVars:
      - key: MONGO_URI
        # Leave value empty here; set this in Render dashboard or as a secret
        value: ""
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "5000"
      - key: JWT_SECRET
        value: ""

  - type: web
    name: kosg-frontend
    env: static
    branch: main
    plan: free
    buildCommand: npm install && npm run build
    staticPublishPath: project/dist
    envVars:
      - key: VITE_API_URL
        # Set this to your backend public URL (e.g. https://kosg-backend.onrender.com)
        value: ""

# Notes:
# - Render does not provide a managed MongoDB in this blueprint. Create a MongoDB Atlas cluster
#   (or another hosted MongoDB) and paste the connection string into the backend service's MONGO_URI env var.
# - After importing this YAML into Render, go to the backend service > Environment and paste a secure
#   `MONGO_URI` (mongodb+srv://user:pass@cluster.mongodb.net/dbname) and `JWT_SECRET`.
# - The frontend uses `VITE_API_URL` at build time; if the frontend reads the API base URL from a different
#   variable, adjust the key accordingly (or set it in your code to read from `import.meta.env.VITE_API_URL`).
